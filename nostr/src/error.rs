use thiserror::Error;

#[derive(Debug, Error)]
pub enum RadrootsNostrError {
    #[cfg(feature = "client")]
    #[error("Client error: {0}")]
    ClientError(#[from] nostr_sdk::client::Error),

    #[cfg(feature = "client")]
    #[error("Database error: {0}")]
    DatabaseError(#[from] nostr_sdk::prelude::DatabaseError),

    #[error("Event error: {0}")]
    EventError(#[from] nostr::event::Error),

    #[error("Event not found: {0}")]
    EventNotFound(String),

    #[error("Event builder failure: {0}")]
    EventBuildError(#[from] nostr::event::builder::Error),

    #[error("Key error: {0}")]
    KeyError(#[from] nostr::key::Error),

    #[cfg(feature = "codec")]
    #[error("Profile encode error: {0}")]
    ProfileEncodeError(#[from] radroots_events_codec::profile::error::ProfileEncodeError),
}

#[derive(Debug, Error)]
pub enum RadrootsNostrTagsResolveError {
    #[error("Missing public key 'p' tag in encrypted event: {0:?}")]
    MissingPTag(nostr::Event),

    #[error("Encrypted event recipient mismatch")]
    NotRecipient,

    #[error("Decryption error: {0}")]
    DecryptionError(String),

    #[error("Failed to parse decrypted tag JSON: {0}")]
    ParseError(#[from] serde_json::Error),
}
